(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{1380:function(t,e,r){"use strict";r.r(e);r(51),r(232),r(57),r(37),r(113);var n={components:{"library-modal":r(1369).default},data:function(){return{mapCenter:[5.55602,-.1969],selectedLibrary:null,libraryDetailModalVisible:!1,tileProviders:[{name:"Satellite",visible:!0,attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"},{name:"Topology",visible:!1,url:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",attribution:'Map data: &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}]}},computed:{libraryTypes:function(){return this.$store.state.libraries.types},markers:function(){return this.$store.state.libraries.libraries},libraries:function(){var t=this,e=this.$store.state.libraries.libraries;return this.searchFilter.length>0?e.filter((function(e){return e.name.toLowerCase().startsWith(t.searchFilter.toLowerCase())})):e}},methods:{markersByLibraryType:function(t){return this.markers.filter((function(e){return null!=e.coordinates&&e.type==t.name}))},markerClicked:function(marker){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.selectedLibrary=marker,this.setLibraryDetailModalVisible(t),null!=marker.coord?this.mapCenter=marker.coord:null!=marker.coordinates&&(this.mapCenter=marker.coordinates.toArray())},setLibraryDetailModalVisible:function(t){this.libraryDetailModalVisible=t},setAddLibraryModalVisible:function(t){this.addLibraryModalVisible=t}},mounted:function(){var t=this;this.$store.dispatch("libraries/loadLibraries").catch((function(e){var r="open".concat(Date.now());t.$notification.error({key:r,message:"Error loading libraries",description:e.toString(),btn:function(e){return e("a-button",{props:{type:"primary",size:"small"},on:{click:function(){t.$notification.close(r),window.open("https://cors-anywhere.herokuapp.com/","_blank")}}},"Fix It")}})}))}},o=r(68),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("a-layout",{staticStyle:{height:"100%"}},[r("div",{staticStyle:{height:"100%","min-width":"280px"},attrs:{id:"map-wrap"}},[r("client-only",[r("l-map",{ref:"myMap",attrs:{zoom:13,center:t.mapCenter}},[r("l-control-layers"),t._v(" "),t._l(t.tileProviders,(function(t){return r("l-tile-layer",{key:t.name,attrs:{name:t.name,visible:t.visible,url:t.url,attribution:t.attribution,"layer-type":"base"}})})),t._v(" "),t._l(t.libraryTypes,(function(e){return r("l-layer-group",{key:e.name,attrs:{name:e.name,"layer-type":"overlay"}},t._l(t.markersByLibraryType(e),(function(marker,n){return r("l-marker",{key:n,attrs:{"lat-lng":marker.coordinates.toArray()},on:{click:function(e){return t.markerClicked(marker)}}},[r("l-icon",{attrs:{"icon-url":e.markerIconUrl,"icon-size":[24,37]}}),t._v(" "),r("l-popup",[r("div",{staticStyle:{"text-align":"center"}},[r("h3",[t._v(t._s(marker.name))]),t._v(" "),r("hr"),t._v(" "),r("div",{staticStyle:{"margin-top":"8px"}},[r("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.setLibraryDetailModalVisible(!0)}}},[t._v("\n                    "+t._s(t.$t("view_details"))+"\n                  ")])],1)])])],1)})),1)}))],2)],1)],1),t._v(" "),r("library-modal",{attrs:{visible:t.libraryDetailModalVisible,library:t.selectedLibrary},on:{onClose:function(e){return t.setLibraryDetailModalVisible(!1)}}})],1)}),[],!1,null,null,null);e.default=component.exports},1514:function(t,e,r){"use strict";r.r(e);var n=r(1380),o=r(686),l={auth:"guest",components:{LibraryMap:n.default,NavigationBar:o.default},data:function(){return{}},computed:{},methods:{}},c=r(68),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("a-layout",{staticStyle:{height:"100vh"}},[r("navigation-bar"),t._v(" "),r("a-layout",{staticStyle:{height:"100%"}},[r("a-layout-content",{staticStyle:{height:"100%"}},[r("library-map")],1),t._v(" "),r("library-list-sider")],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{NavigationBar:r(686).default,LibraryMap:r(1380).default,LibraryListSider:r(1460).default})}}]);